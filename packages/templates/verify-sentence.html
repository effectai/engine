<div id="app" style="text-align: center">
  <h1>Effect AI - Sentence Varification</h1>

  <hr />

  <div class="mx-auto" style="max-width: 80%">

  <p class="mb-5">Check if this is a linguistically correct sentence?</p>
  <div class="box">
    <p class="is-size-4 has-text-weight-semibold">{{sentence}}</p>
  </div>

  <div>
    <button class="button is-danger is-medium"
    @click="this.answer='No'">No</button>

    <button class="button is-medium mx-3"
    @click="this.answer='Skip'">Skip</button>

    <button class="button is-success is-medium"
    @click="this.answer='Yes'">Yes</button>
  </div>

  <div class="container is-max-desktop box mt-5 ">
    <label class="label">Instructions:</label>
    <div class="has-text-left">
      <li>Fewer than 15 words per sentence</li>
      <li>Use correct grammar</li>
      <li>Use correct spelling and punctuation</li>
      <li>No numbers and special characters</li>
      <li>No foreign letters</li>
      <li>Include appropriate citation</li>
      <li>Ideally natural and conversational (it should be easy to read the sentence)</li>
    </div>      
  </div>

  <button
    @click.prevent="uploadAndSubmit"
    class="button is-primary is-large"
    :class="{'is-loading': btnLoading}"
  >
    Submit
  </button>
</div>

<!-- ðŸ“š Load in resources: [Bulma, Effect Network Styling]  -->
<link rel="stylesheet" href="https://unpkg.com/bulma@0.9.4/css/bulma.min.css" />
<link href="https://app.effect.network/force-defaults.css" rel="stylesheet" />

<script src="https://cdn.jsdelivr.net/npm/ipfs-http-client/dist/index.min.js"></script>
<script type="module">
  import { createApp } from "https://unpkg.com/vue@3/dist/vue.esm-browser.js";

  createApp({
    data() {
      return {
        title: "Effect AI Sentence Creator",
        btnLoading: false,
        ipfsClient: null,
        sentence: "Overall, living in Oxford as a student has been an enriching and fulfilling experience.",
        answer: ""
      };
    },
    computed: {},
    created() {},
    mounted() {},
    methods: {
      async uploadAndSubmit() {
        this.btnLoading = true;
        try {
          parent.postMessage(
            {
              task: "submit",
              values: {
                sentence: this.sentence,
                answer: this.answer
              },
            },
            "*"
          );
        } catch (error) {
          console.error("Failed to upload to IPFS", error);
        }
        this.btnLoading = false;
      },
    },
  }).mount("#app");
</script>